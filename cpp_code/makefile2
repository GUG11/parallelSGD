all: libstats.so stats_client stats_server 

libstats.o: libstats.c
	gcc -c -Wall -Werror -fpic libstats.c -o libstats.o

libstats.so: libstats.o
	gcc -shared -o libstats.so libstats.o 
	
stats_client: stats_client.c
	gcc -o stats_client stats_client.c -Wall -Werror -lstats -L. -lpthread

stats_server: stats_server.c
	gcc -o stats_server stats_server.c -Wall -Werror -lpthread

clean:
	-rm -f libstats.o
